import $ from "jquery";
// http://www.mocky.io/v2/5c38e5533100005800a99285



class Users {
    constructor() {
        this.peoples = [
            {
                username: "elder",
                password: "123456"
            },
            {
                username : "bianca",
                password : "biancaPDM"
            }
        ]
        console.log(this.peoples);
        this.localSpeople = []
        this.binding();
    }

    validadeUser(username,password){
        var _self = this
        this.peoples.forEach(function(element){
          console.log(element)
            if(username == element.element && password == element.password) {
                console.log(element.username + " is logged in!!!");

                _self.localSpeople.push({
                    username: element.username,
                    password: element.password
                })

                _self.SetUserStorege(_self.localSpeople)

            } else{
                console.log("incorrect username or password")
            }
        })
    }

    SetUserStorege(user){
        let userStorage = JSON.stringify(user)
        console.log('localSpeople', userStorage)
        localStorage.setItem('logged', userStorage);
    }
    
    binding(){
        let _self = this;
        let $username = $('#username')
        let $password = $('#password')
        let $btnSend = $('#send')
        
        $('.form').submit('#send', function(e){
            e.preventDefault();
            let valName = $username.val();
            let valPass = $password.val();
            
            _self.validadeUser(valName,valPass)
        })
        
    }

    init(){
    
    }

} 

new Users()